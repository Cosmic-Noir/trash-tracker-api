CREATE TABLE tt_users (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username  TEXT NOT NULL,
    date_joined TIMESTAMP DEFAULT now() NOT NULL,
    email TEXT NOT NULL,
    pass  TEXT NOT NULL,
    score INTEGER DEFAULT 0 NOT NULL
);

CREATE TABLE tt_sites (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    posted_by INTEGER REFERENCES tt_users(id) ON DELETE CASCADE NOT NULL,
    date_posted TIMESTAMP DEFAULT now() NOT NULL,
    title TEXT NOT NULL,
    addrss TEXT NOT NULL,
    city TEXT NOT NULL,
    state_abr TEXT NOT NULL,
    before_img TEXT NOT NULL,
    after_img TEXT DEFAULT NULL,
    content TEXT NOT NULL,
    clean BOOLEAN DEFAULT false NOT NULL
);

CREATE TABLE tt_comments (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    user_ref INTEGER REFERENCES tt_users(id) ON DELETE CASCADE NOT NULL,
    site_id INTEGER REFERENCES tt_sites(id) ON DELETE CASCADE NOT NULL,
    date_posted TIMESTAMP DEFAULT now() NOT NULL,
    content TEXT NOT NULL

);

CREATE TABLE tt_score (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    score INTEGER DEFAULT 0 NOT NULL
);